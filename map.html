
<head>

        <title>Tracking Vehicle</title>
        <link rel="icon" type="image/png" href="img/title.png"/>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="css/bootstrap.min.css">
        <script src="jquery.min.js"></script>
        <script src="js/bootstrap.min.js"></script>
      
        <link href="css/jcarousel.css" rel="stylesheet" />
          <link href="css/flexslider.css" rel="stylesheet" />
      
        <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet"/>
      <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet"/>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/7.26.28/sweetalert2.all.min.js"></script>
          
    <style>
        #map-canvas {
          height: 500px;
        }

        
      .blog .carousel-indicators {
        left: 0;
        top: auto;
        bottom: -40px;

    }   

    /* The colour of the indicators */
    .blog .carousel-indicators li {
        background: #a3a3a3;
        border-radius: 50%;
        width: 8px;
        height: 8px;
    }

    .blog .carousel-indicators .active {
    background: #707070;
    }


    .abc-cc {
        background-color: black;
        padding: 16px;
        text-align: center;
    }
    .abc-ccc {
        background-color: #f0f0f0;
        padding: 1px;
        text-align: center;
    }
    .abc-c {
        
        text-shadow: 1px 1px #ccc;
    }
    .footer {
        background: rgb(0,0,0);
        padding: 10px 0;
        }
        .footer a {
        color: #70726F;
        font-size: 20px;
        padding: 10px;
        border-right: 1px solid #70726F;
        transition: all .5s ease;
        }
        .footer a:first-child {
        border-left: 1px solid #70726F;
        }
        .footer a:hover {
        color: white;
        }

    </style>
<script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.3.1.min.js"></script>
<script src="https://www.gstatic.com/firebasejs/5.5.2/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/5.5.2/firebase.js"></script>




<script src='https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js'></script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCSIl2sUDYCnfYDewDycEc7B0TI-DdL2Jw&sensor=false">
</script>

<script>
  // Initialize Firebase

  // TODO: Replace with your project's customized code snippet
  var config = {
    apiKey: "AIzaSyCSIl2sUDYCnfYDewDycEc7B0TI-DdL2Jw",
    authDomain: "vehicletrackinsystem.firebaseapp.com",
    databaseURL: "https://vehicletrackinsystem.firebaseio.com",
    projectId: "vehicletrackinsystem",
    storageBucket: "vehicletrackinsystem.appspot.com",
    messagingSenderId: "986184046405"
  };
  firebase.initializeApp(config);
  var database = firebase.database();
  
  var leadsRef = database.ref('Location');
    leadsRef.on('value', gotData,errData);

  var loc;
  var latitude;
  var longitude;
  function gotData(data){
      loc=data.val();
      locArr=loc.split(',');
      latitude=locArr[0];
      longitude=locArr[1];
      var map;
    function initialise(location){
        
        var currentLocation=new google.maps.LatLng(latitude,longitude);
        var mapOptions={
            center : currentLocation,
            zoom:15,
            mapTypeId:google.maps.MapTypeId.ROADMAP

        };
        
        map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);

        var iconBase = 'https://maps.google.com/mapfiles/kml/shapes/';
        var icons = {
          parking: {
            icon: iconBase + 'parking_lot_maps.png'
          },
          library: {
            icon: iconBase + 'library_maps.png'
          },
          info: {
            icon: iconBase + 'info-i_maps.png'
          }
        };


        var marker=new google.maps.Marker({
            position : currentLocation,
            map:map
        });
    }

    $(document).ready(function(){
        navigator.geolocation.getCurrentPosition(initialise);
    });
      
  }

  function errData(err){
      console.log('Error!');
      console.log(err);
  }
//key=AIzaSyCSIl2sUDYCnfYDewDycEc7B0TI-DdL2Jw&
</script>




    

</head>


<body ng-app="mainapp">
        
        <div class="container">
                <div class="p-3 mb-2 bg-success text-white">
                <nav class="navbar navbar-inverse">
                  <div class="container-fluid">
                    <ul class="nav navbar-nav">
                      <li><a href='/Farm-Management-System-IoT'>
                      <span class="glyphicon glyphicon-home"></span> Home</a></li>
                      <li class="active"><a href='map.html'>
                      <span class="glyphicon glyphicon-shopping-cart"></span> MAP</a></li>
                      
                
                    </ul>
                    <ul class="nav navbar-nav navbar-right">
                      <li><a href='/Farm-Management-System-IoT'><span class="glyphicon glyphicon-log-in"></span> Login</a></li>
                    </ul>
                  </div>
                </nav>
                </div>
        
        <div class="row"></div>
      
      <div class="row"></div>
      
      <!--
      <img src="img\logo.png" alt="Logo" class="img-thumbnail" style="width:20%">
      -->
      
      <div id="myCarousel" class="carousel slide" data-interval="6000" data-ride="carousel">
          <!-- Carousel indicators -->
          <ol class="carousel-indicators">
              <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
              <li data-target="#myCarousel" data-slide-to="1"></li>
              <li data-target="#myCarousel" data-slide-to="2"></li>
          </ol>   
          <!-- Carousel items -->
          <div class="carousel-inner" role="listbox" style=" width:100%; height:250px !important;">
              <div class="item active">
                  <img src="img/y.jpg" alt="First Slide" width="100%">
                  <div class="carousel-caption">
                      <h3>Vegetables and Fruits</h3>
                      <p>There are fresh vegetables and fruits</p>
                  </div>
              </div>
              <div class="item">
                  <img src="img/z.jpg" alt="Second Slide" width="100%" >
                  <div class="carousel-caption">
                      <h3>Clean Milk Products</h3>
                      <p>Fresh Milk Products with good condition</p>
                  </div>
              </div>
              <div class="item">
                  <img src="img/zz.jpg" alt="Third Slide" width="100%">
                  <div class="carousel-caption">
                      <h3>Farm House</h3>
                      <p>Vegetables , fruits & beans from farm house</p>
                  </div>
              </div>
          </div>
      
        
          <!-- Carousel nav -->
          <a class="carousel-control left" href="#myCarousel" data-slide="prev">
              <span class="glyphicon glyphicon-chevron-left"></span>
          </a>
          <a class="carousel-control right" href="#myCarousel" data-slide="next">
              <span class="glyphicon glyphicon-chevron-right"></span>
          </a>
      </div>
      
      
      
      
            <div class="w3-animate-fading"><center><b class="abc-c">Labuduwa Farm Akmeemana, Galle.</b></center></div></div>
        </h1>
      </div>
      
      <div ng-view>
      
      </div>
      
      <div class="container">
            <h2>Vehicle Location</h2>
           <div id="map-canvas"></div> 
    </div>
      
      
      <div class="footer">
        <div class="container text-center">
          <a href=""><i class="fa fa-facebook"></i></a>
          <a href=""><i class="fa fa-twitter"></i></a>
          <a href=""><i class="fa fa-linkedin"></i></a>
          <a href=""><i class="fa fa-google-plus"></i></a>
          <a href=""><i class="fa fa-skype"></i></a>
        </div>
        
      <div class="abc-cc" style="width:100%">
        
        &copy Farm Management<br/>
      Contact : 011 2 541 214<br/>
      farmmanagement@gmail.com
      </div>
      </div></div>
      
      
      
      </body>


</html>